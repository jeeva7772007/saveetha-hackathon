<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MediTriageAI ‚Äî Intelligent Patient Risk Assessment</title>
  <meta name="description"
    content="AI-powered medical triage system that analyzes your symptoms and provides instant risk assessment, precautions, and emergency guidance." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <!-- ‚îÄ‚îÄ Background Orbs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div class="bg-orb orb-1"></div>
  <div class="bg-orb orb-2"></div>
  <div class="bg-orb orb-3"></div>

  <!-- ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <header class="header">
    <div class="header-inner">
      <div class="logo">
        <div class="logo-icon">
          <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="20" cy="20" r="20" fill="url(#logoGrad)" />
            <path d="M20 10v20M10 20h20" stroke="white" stroke-width="3.5" stroke-linecap="round" />
            <defs>
              <linearGradient id="logoGrad" x1="0" y1="0" x2="40" y2="40" gradientUnits="userSpaceOnUse">
                <stop stop-color="#06b6d4" />
                <stop offset="1" stop-color="#6366f1" />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="logo-text">
          <span class="logo-title">MediTriageAI</span>
          <span class="logo-sub">Intelligent Risk Assessment</span>
        </div>
      </div>
      <nav class="header-nav">
        <div class="header-badge" id="aiBadge">
          <span class="pulse-dot"></span>
          AI Model Active
        </div>
        <a href="history.html" class="nav-link" id="historyLink" style="display:none;">üìã History</a>
        <span class="nav-user" id="navUser"></span>
        <button class="nav-logout-btn" id="logoutBtn" style="display:none;" onclick="handleLogout()">Logout</button>
      </nav>
    </div>
  </header>

  <!-- ‚îÄ‚îÄ Main Content ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <main class="main">

    <!-- Hero Section -->
    <section class="hero">
      <h1 class="hero-title">Describe Your <span class="gradient-text">Symptoms</span></h1>
      <p class="hero-sub">
        Our AI analyzes your condition in seconds ‚Äî identifying risk levels,
        emergency flags, and personalized precautions.
      </p>
    </section>

    <!-- Input Card -->
    <section class="input-section">
      <div class="card input-card">
        <div class="card-header">
          <div class="card-header-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
              <circle cx="12" cy="7" r="4" />
            </svg>
          </div>
          <div>
            <h2 class="card-title">Patient Symptom Input</h2>
            <p class="card-desc">Describe your symptoms in natural language ‚Äî be as detailed as possible</p>
          </div>
        </div>

        <div class="textarea-wrapper">
          <textarea id="symptomInput" class="symptom-textarea"
            placeholder="Example: I have been experiencing severe chest pain and shortness of breath for the past 2 hours. I also feel dizzy and my left arm is numb..."
            rows="6" maxlength="2000"></textarea>
          <div class="char-counter"><span id="charCount">0</span> / 2000</div>
        </div>

        <!-- Sample chips -->
        <div class="sample-section">
          <span class="sample-label">Try an example:</span>
          <div class="sample-chips">
            <button class="chip" id="chip1">Chest pain & breathlessness</button>
            <button class="chip" id="chip2">Fever, headache & stiff neck</button>
            <button class="chip" id="chip3">Runny nose & mild cough</button>
            <button class="chip" id="chip4">Stomach pain & vomiting</button>
          </div>
        </div>

        <button class="analyze-btn" id="analyzeBtn">
          <span class="btn-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
              stroke-linejoin="round">
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
            </svg>
          </span>
          <span id="btnText">Analyze Symptoms</span>
        </button>
      </div>
    </section>

    <!-- Loading State -->
    <section class="loading-section" id="loadingSection" style="display:none;">
      <div class="loading-card">
        <div class="loading-ring">
          <div class="ring-inner"></div>
          <div class="ring-pulse"></div>
          <div class="loading-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round">
              <path
                d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3" />
              <path d="M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4" />
              <circle cx="20" cy="10" r="2" />
            </svg>
          </div>
        </div>
        <div class="loading-text">
          <h3>Analyzing Symptoms<span class="dots"><span>.</span><span>.</span><span>.</span></span></h3>
          <p id="loadingStep">Processing your description with AI...</p>
        </div>
        <div class="loading-steps">
          <div class="step active" id="step1">
            <div class="step-dot"></div>
            <span>Extracting symptoms</span>
          </div>
          <div class="step" id="step2">
            <div class="step-dot"></div>
            <span>Running ML model</span>
          </div>
          <div class="step" id="step3">
            <div class="step-dot"></div>
            <span>Generating report</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Results Section -->
    <section class="results-section" id="resultsSection" style="display:none;">

      <!-- Emergency Banner -->
      <div class="emergency-banner" id="emergencyBanner" style="display:none;">
        <div class="emergency-inner">
          <div class="emergency-icon">‚ö†Ô∏è</div>
          <div class="emergency-content">
            <h3>EMERGENCY ‚Äî Seek Immediate Medical Attention</h3>
            <p>Based on your symptoms, this may be a life-threatening emergency. Call <strong>112</strong> or
              <strong>108</strong> immediately or go to the nearest Emergency Room.</p>
          </div>
          <div class="emergency-call">
            <a href="tel:112" class="emergency-call-btn">üìû Call 112</a>
          </div>
        </div>
      </div>

      <!-- Summary Row -->
      <div class="summary-row">
        <!-- Risk Card -->
        <div class="card summary-card" id="riskCard">
          <div class="summary-icon" id="riskIcon"></div>
          <div class="summary-label">Risk Level</div>
          <div class="summary-value" id="riskLevel">‚Äî</div>
          <div class="risk-bar-wrap">
            <div class="risk-bar" id="riskBar"></div>
          </div>
        </div>

        <!-- Disease Card -->
        <div class="card summary-card">
          <div class="summary-icon" id="diseaseIcon">üî¨</div>
          <div class="summary-label">Predicted Condition</div>
          <div class="summary-value disease-value" id="diseaseValue">‚Äî</div>
          <div class="summary-meta" id="diseaseMeta"></div>
        </div>

        <!-- Confidence Card -->
        <div class="card summary-card">
          <div class="summary-icon">üìä</div>
          <div class="summary-label">Model Confidence</div>
          <div class="summary-value" id="confidenceValue">‚Äî</div>
          <div class="confidence-bar-wrap">
            <div class="confidence-bar-bg">
              <div class="confidence-bar-fill" id="confidenceFill"></div>
            </div>
          </div>
        </div>

        <!-- Emergency Card -->
        <div class="card summary-card" id="emergencyCard">
          <div class="summary-icon" id="emergencyIcon"></div>
          <div class="summary-label">Emergency Status</div>
          <div class="summary-value" id="emergencyStatus">‚Äî</div>
          <div class="summary-meta" id="emergencyMeta"></div>
        </div>
      </div>

      <!-- Symptoms Detected -->
      <div class="card" id="symptomsCard">
        <div class="card-section-title">
          <span class="section-icon">ü©∫</span>
          Symptoms Detected
        </div>
        <div class="symptoms-tags" id="symptomsTags"></div>
      </div>

      <!-- Top Predictions -->
      <div class="card">
        <div class="card-section-title">
          <span class="section-icon">üéØ</span>
          Top Differential Diagnoses
        </div>
        <div class="predictions-list" id="predictionsList"></div>
      </div>

      <!-- Precautions -->
      <div class="card">
        <div class="card-section-title">
          <span class="section-icon">üõ°Ô∏è</span>
          Recommended Precautions
        </div>
        <div class="precautions-list" id="precautionsList"></div>
      </div>

      <!-- Detailed Analysis -->
      <div class="card analysis-card">
        <div class="card-section-title">
          <span class="section-icon">üìã</span>
          Detailed Analysis Report
        </div>
        <div class="analysis-content" id="analysisContent"></div>
      </div>

      <!-- Disclaimer -->
      <div class="disclaimer-card">
        <span class="disclaimer-icon">‚ÑπÔ∏è</span>
        <p><strong>Disclaimer:</strong> This analysis is AI-generated and is for informational purposes only. It does
          NOT replace professional medical advice, diagnosis, or treatment. Always consult a qualified healthcare
          professional.</p>
      </div>

      <!-- Try Again -->
      <button class="try-again-btn" id="tryAgainBtn">
        ‚Ü© Analyze Another Symptom
      </button>

    </section>

    <!-- Error Section -->
    <section class="error-section" id="errorSection" style="display:none;">
      <div class="card error-card">
        <div class="error-icon">‚ö†Ô∏è</div>
        <h3 id="errorTitle">An error occurred</h3>
        <p id="errorMsg"></p>
        <button class="retry-btn" id="retryBtn">Try Again</button>
      </div>
    </section>

  </main>

  <!-- ‚îÄ‚îÄ Footer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <footer class="footer">
    <p>MediTriageAI &copy; 2026 &nbsp;¬∑&nbsp; Saveetha Hackathon &nbsp;¬∑&nbsp; For educational purposes only</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabase.js"></script>
  <script src="app.js"></script>
  <script>
    // Auth guard + show user nav
    (async () => {
      const { data: { session } } = await _supabase.auth.getSession();
      if (!session) { window.location.href = 'login.html'; return; }
      document.getElementById('navUser').textContent = session.user.email;
      document.getElementById('historyLink').style.display = '';
      document.getElementById('logoutBtn').style.display = '';
      document.getElementById('aiBadge').style.display = 'none';
    })();
    async function handleLogout() {
      await _supabase.auth.signOut();
      window.location.href = 'login.html';
    }
  </script>
</body>

</html>